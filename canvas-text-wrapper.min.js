/*! canvas-text-wrapper
 *  https://github.com/namniak/canvas-text-wrapper
 *  Version:  0.7.0
 *  MIT License (http://www.opensource.org/licenses/mit-license.html)
 */
!function(a){function b(b,c,d){"use strict";function e(a){A||(A=r.sizeToFill?t.font.split(/\b\d+px\b/i):r.font.split(/\b\d+px\b/i)),t.font=A[0]+a+"px"+A[1]}function f(){isNaN(r.lineHeight)?-1!==r.lineHeight.toString().indexOf("px")?K=parseInt(r.lineHeight):-1!==r.lineHeight.toString().indexOf("%")&&(K=parseInt(r.lineHeight)/100*F):K=F*r.lineHeight}function g(){if(r.sizeToFill){var a=c.trim().split(/\s+/).length,b=0;do h(++b);while(E>G&&H.join(" ").split(/\s+/).length==a);h(--b)}else i();r.justifyLines&&"auto"===r.lineBreak&&l(),o(),m()}function h(a){e(a),K=a,i()}function i(){if(r.allowNewLine)for(var a=c.trim().split("\n"),b=0,d=0;b<a.length-1;b++)d+=a[b].trim().split(/\s+/).length,I.push(d);var e=c.trim().split(/\s+/);j(e),k(e),G=H.length*K}function j(a){var b,c,d,e;a.forEach(function(f,g){if(b="",c=t.measureText(f).width,c>D){for(var h=0;t.measureText(b+f[h]).width<=D&&h<f.length;h++)b+=f[h];d=f.slice(0,h),e=f.slice(h),a.splice(g,1,d,e)}})}function k(a){for(var b=0,c=0;b<a.length;c++)if(H[c]="","auto"===r.lineBreak){if(t.measureText(H[c]+a[b]).width>D)break;for(;t.measureText(H[c]+a[b]).width<=D&&b<a.length;)if(H[c]+=a[b]+" ",b++,r.allowNewLine)for(var d=0;d<I.length;d++)if(I[d]===b){c++,H[c]="";break}H[c]=H[c].trim()}else H[c]=a[b],b++}function l(){for(var a,b,c,d=0;d<H.length;d++)c=t.measureText(H[d]).width,(!a||c>a)&&(a=c,b=d);var e,f,g,h,i,j="â€Š";for(d=0;d<H.length;d++)if(d!==b&&(e=H[d].trim().split(/\s+/).length,!(1>=e))){H[d]=H[d].trim().split(/\s+/).join(j),f=t.measureText(j).width,g=(a-t.measureText(H[d]).width)/f,h=g/(e-1),i="";for(var k=0;h>k;k++)i+=j;H[d]=H[d].trim().split(j).join(i)}}function m(){for(var a=0;a<H.length;a++)n(H[a]),J.y=parseInt(J.y)+K,t.fillText(H[a],J.x,J.y),r.strokeText&&t.strokeText(H[a],J.x,J.y)}function n(a){"center"==r.textAlign?J.x=(B-t.measureText(a).width)/2:"right"==r.textAlign?J.x=B-t.measureText(a).width-r.paddingX:J.x=r.paddingX}function o(){"middle"==r.verticalAlign?J.y=(C-G)/2:"bottom"==r.verticalAlign?J.y=C-G-r.paddingY:J.y=r.paddingY}function p(){if("string"!=typeof c)throw new TypeError("The second parameter must be a String.");if(isNaN(F))throw new TypeError('Cannot parse "font".');if(isNaN(K))throw new TypeError('Cannot parse "lineHeight".');if("left"!==r.textAlign.toLocaleLowerCase()&&"center"!==r.textAlign.toLocaleLowerCase()&&"right"!==r.textAlign.toLocaleLowerCase())throw new TypeError('Property "textAlign" must be set to either "left", "center", or "right".');if("top"!==r.verticalAlign.toLocaleLowerCase()&&"middle"!==r.verticalAlign.toLocaleLowerCase()&&"bottom"!==r.verticalAlign.toLocaleLowerCase())throw new TypeError('Property "verticalAlign" must be set to either "top", "middle", or "bottom".');if("boolean"!=typeof r.justifyLines)throw new TypeError('Property "justifyLines" must be a Boolean.');if(isNaN(r.paddingX))throw new TypeError('Property "paddingX" must be a Number.');if(isNaN(r.paddingY))throw new TypeError('Property "paddingY" must be a Number.');if("boolean"!=typeof r.fitParent)throw new TypeError('Property "fitParent" must be a Boolean.');if("auto"!==r.lineBreak.toLocaleLowerCase()&&"word"!==r.lineBreak.toLocaleLowerCase())throw new TypeError('Property "lineBreak" must be set to either "auto" or "word".');if("boolean"!=typeof r.sizeToFill)throw new TypeError('Property "sizeToFill" must be a Boolean.');if("boolean"!=typeof r.strokeText)throw new TypeError('Property "strokeText" must be a Boolean.');if("boolean"!=typeof r.renderHDPI)throw new TypeError('Property "renderHDPI" must be a Boolean.')}var q={font:"18px Arial, sans-serif",sizeToFill:!1,lineHeight:1,allowNewLine:!0,lineBreak:"auto",textAlign:"left",verticalAlign:"top",justifyLines:!1,paddingX:0,paddingY:0,fitParent:!1,strokeText:!1,renderHDPI:!0},r={};for(var s in q)r[s]=d.hasOwnProperty(s)?d[s]:q[s];var t=b.getContext("2d");t.font=r.font,t.textBaseline="bottom";var u=1,v="undefined"!=typeof global?global.devicePixelRatio:a.devicePixelRatio;if(r.renderHDPI&&v>1){var w={};for(var s in t)w[s]=t[s];var x=b.width,y=b.height;u=v,b.width=x*u,b.height=y*u,b.style.width=x*u*.5+"px",b.style.height=y*u*.5+"px";for(var s in w)try{t[s]=w[s]}catch(z){}t.scale(u,u)}var A,B=(r.fitParent?b.parentNode.clientWidth:b.width)/u,C=(r.fitParent?b.parentNode.clientHeight:b.height)/u,D=B-2*r.paddingX,E=C-2*r.paddingY,F=r.font.match(/\d+(px|em|%)/g)?+r.font.match(/\d+(px|em|%)/g)[0].match(/\d+/g):18,G=0,H=[],I=[],J={x:0,y:0},K=0;e(F),f(),p(),g()}"module"in a&&"exports"in module?module.exports=b:a.CanvasTextWrapper=b}(this);