/*! canvas-text-wrapper
 *  https://github.com/namniak/canvas-text-wrapper
 *  Version:  0.6.0
 *  MIT License (http://www.opensource.org/licenses/mit-license.html)
 */
!function(a){function b(a,b,c){"use strict";function d(a){y||(y=q.sizeToFill?s.font.split(/\b\d+px\b/i):q.font.split(/\b\d+px\b/i)),s.font=y[0]+a+"px"+y[1]}function e(){isNaN(q.lineHeight)?-1!==q.lineHeight.toString().indexOf("px")?I=parseInt(q.lineHeight):-1!==q.lineHeight.toString().indexOf("%")&&(I=parseInt(q.lineHeight)/100*D):I=D*q.lineHeight}function f(){if(q.sizeToFill){var a=b.trim().split(/\s+/).length,c=0;do g(++c);while(C>E&&F.join(" ").split(/\s+/).length==a);g(--c)}else h();q.justifyLines&&"auto"===q.lineBreak&&k(),n(),l()}function g(a){d(a),I=a,h()}function h(){if(q.allowNewLine)for(var a=b.trim().split("\n"),c=0,d=0;c<a.length-1;c++)d+=a[c].trim().split(/\s+/).length,G.push(d);var e=b.trim().split(/\s+/);i(e),j(e),E=F.length*I}function i(a){var b,c,d,e;a.forEach(function(f,g){if(b="",c=s.measureText(f).width,c>B){for(var h=0;s.measureText(b+f[h]).width<=B&&h<f.length;h++)b+=f[h];d=f.slice(0,h),e=f.slice(h),a.splice(g,1,d,e)}})}function j(a){for(var b=0,c=0;b<a.length;c++)if(F[c]="","auto"===q.lineBreak){for(;s.measureText(F[c]+a[b]).width<=B&&b<a.length;)if(F[c]+=a[b]+" ",b++,q.allowNewLine)for(var d=0;d<G.length;d++)if(G[d]===b){c++,F[c]="";break}F[c]=F[c].trim()}else F[c]=a[b],b++}function k(){for(var a,b,c,d=0;d<F.length;d++)c=s.measureText(F[d]).width,(!a||c>a)&&(a=c,b=d);var e,f,g,h,i,j="â€Š";for(d=0;d<F.length;d++)if(d!==b&&(e=F[d].trim().split(/\s+/).length,!(1>=e))){F[d]=F[d].trim().split(/\s+/).join(j),f=s.measureText(j).width,g=(a-s.measureText(F[d]).width)/f,h=g/(e-1),i="";for(var k=0;h>k;k++)i+=j;F[d]=F[d].trim().split(j).join(i)}}function l(){for(var a=0;a<F.length;a++)m(F[a]),H.y=parseInt(H.y)+I,s.fillText(F[a],H.x,H.y),q.strokeText&&s.strokeText(F[a],H.x,H.y)}function m(a){"center"==q.textAlign?H.x=(z-s.measureText(a).width)/2:"right"==q.textAlign?H.x=z-s.measureText(a).width-q.paddingX:H.x=q.paddingX}function n(){"middle"==q.verticalAlign?H.y=(A-E)/2:"bottom"==q.verticalAlign?H.y=A-E-q.paddingY:H.y=q.paddingY}function o(){if(!(a instanceof HTMLCanvasElement))throw new TypeError("The first parameter must be an instance of HTMLCanvasElement.");if("string"!=typeof b)throw new TypeError("The second parameter must be a String.");if(isNaN(D))throw new TypeError('Cannot parse "font".');if(isNaN(I))throw new TypeError('Cannot parse "lineHeight".');if("left"!==q.textAlign.toLocaleLowerCase()&&"center"!==q.textAlign.toLocaleLowerCase()&&"right"!==q.textAlign.toLocaleLowerCase())throw new TypeError('Property "textAlign" must be set to either "left", "center", or "right".');if("top"!==q.verticalAlign.toLocaleLowerCase()&&"middle"!==q.verticalAlign.toLocaleLowerCase()&&"bottom"!==q.verticalAlign.toLocaleLowerCase())throw new TypeError('Property "verticalAlign" must be set to either "top", "middle", or "bottom".');if("boolean"!=typeof q.justifyLines)throw new TypeError('Property "justifyLines" must be a Boolean.');if(isNaN(q.paddingX))throw new TypeError('Property "paddingX" must be a Number.');if(isNaN(q.paddingY))throw new TypeError('Property "paddingY" must be a Number.');if("boolean"!=typeof q.fitParent)throw new TypeError('Property "fitParent" must be a Boolean.');if("auto"!==q.lineBreak.toLocaleLowerCase()&&"word"!==q.lineBreak.toLocaleLowerCase())throw new TypeError('Property "lineBreak" must be set to either "auto" or "word".');if("boolean"!=typeof q.sizeToFill)throw new TypeError('Property "sizeToFill" must be a Boolean.');if("boolean"!=typeof q.strokeText)throw new TypeError('Property "strokeText" must be a Boolean.');if("boolean"!=typeof q.renderHDPI)throw new TypeError('Property "renderHDPI" must be a Boolean.')}var p={font:"18px Arial, sans-serif",sizeToFill:!1,lineHeight:1,allowNewLine:!0,lineBreak:"auto",textAlign:"left",verticalAlign:"top",justifyLines:!1,paddingX:0,paddingY:0,fitParent:!1,strokeText:!1,renderHDPI:!0},q={};for(var r in p)q[r]=c.hasOwnProperty(r)?c[r]:p[r];var s=a.getContext("2d");s.font=q.font,s.textBaseline="bottom";var t=1;if(q.renderHDPI&&window.devicePixelRatio){var u=s.lineWidth,v=s.strokeStyle,w=a.width,x=a.height;t=window.devicePixelRatio,a.width=w*t,a.height=x*t,a.style.width=w*t*.5+"px",a.style.height=x*t*.5+"px",s.scale(t,t),s.lineWidth=u,s.strokeStyle=v}var y,z=(q.fitParent?a.parentNode.clientWidth:a.width)/t,A=(q.fitParent?a.parentNode.clientHeight:a.height)/t,B=z-2*q.paddingX,C=A-2*q.paddingY,D=q.font.match(/\d+(px|em|%)/g)?+q.font.match(/\d+(px|em|%)/g)[0].match(/\d+/g):18,E=0,F=[],G=[],H={x:0,y:0},I=0;d(D),e(),o(),f()}"module"in a&&"exports"in module?module.exports=b:a.CanvasTextWrapper=b}(this);